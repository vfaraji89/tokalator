{
  "name": "tokalator",
  "displayName": "Tokalator",
  "description": "Count your tokens like beads on an abacus. Real-time context budget calculator for AI coding assistants.",
  "version": "0.4.0",
  "publisher": "vfaraji89",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/vfaraji89/tokalator"
  },
  "icon": "media/icon.png",
  "galleryBanner": {
    "color": "#1a1a2e",
    "theme": "dark"
  },
  "badges": [
    {
      "url": "https://img.shields.io/visual-studio-marketplace/v/vfaraji89.tokalator?style=flat-square&label=Marketplace",
      "href": "https://marketplace.visualstudio.com/items?itemName=vfaraji89.tokalator",
      "description": "Visual Studio Marketplace Version"
    },
    {
      "url": "https://img.shields.io/visual-studio-marketplace/i/vfaraji89.tokalator?style=flat-square",
      "href": "https://marketplace.visualstudio.com/items?itemName=vfaraji89.tokalator",
      "description": "Visual Studio Marketplace Installs"
    },
    {
      "url": "https://img.shields.io/github/license/vfaraji89/tokalator?style=flat-square",
      "href": "https://github.com/vfaraji89/tokalator/blob/main/LICENSE",
      "description": "License"
    }
  ],
  "markdown": "github",
  "qna": "marketplace",
  "preview": false,
  "engines": {
    "vscode": "^1.99.0"
  },
  "categories": [
    "AI",
    "Other",
    "Chat"
  ],
  "keywords": [
    "tokens",
    "context",
    "context-engineering",
    "context-window",
    "ai",
    "copilot",
    "claude",
    "chatgpt",
    "gemini",
    "tokalator",
    "abacus",
    "cost-estimation",
    "prompt-caching",
    "secret-detection",
    "token-counter"
  ],
  "activationEvents": [
    "onStartupFinished"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "tokalator",
          "title": "Tokalator",
          "icon": "media/abacus.svg"
        }
      ]
    },
    "views": {
      "tokalator": [
        {
          "type": "webview",
          "id": "tokalator.dashboard",
          "name": "Token Budget"
        }
      ]
    },
    "chatParticipants": [
      {
        "id": "tokalator.tokens",
        "name": "tokalator",
        "fullName": "Tokalator",
        "description": "Count and manage your AI context token budget",
        "isSticky": false,
        "commands": [
          {
            "name": "count",
            "description": "Show current token count and budget status"
          },
          {
            "name": "optimize",
            "description": "Context optimization report — tokens, cost, security, and health analysis"
          },
          {
            "name": "pin",
            "description": "Pin a file so it's always included"
          },
          {
            "name": "breakdown",
            "description": "Show where your tokens are going"
          },
          {
            "name": "instructions",
            "description": "List, count, and estimate tokens for instruction files in workspace"
          },
          {
            "name": "model",
            "description": "Show or switch the active AI model"
          },
          {
            "name": "unpin",
            "description": "Unpin a file so it returns to normal relevance scoring"
          },
          {
            "name": "reset",
            "description": "Reset session state (chat turn counter)"
          },
          {
            "name": "compaction",
            "description": "Show per-turn token growth and compaction recommendations"
          },
          {
            "name": "preview",
            "description": "Preview token cost of your next message before sending"
          },
          {
            "name": "secrets",
            "description": "Scan open files for exposed secrets, API keys, and credentials"
          },
          {
            "name": "cost",
            "description": "Show cost estimation, caching savings, and monthly projections"
          },
          {
            "name": "exit",
            "description": "End the current session and save summary"
          }
        ]
      }
    ],
    "commands": [
      {
        "command": "tokalator.refresh",
        "title": "Refresh Token Count",
        "category": "Tokalator",
        "icon": "$(refresh)"
      },
      {
        "command": "tokalator.optimize",
        "title": "Context Optimization Report",
        "category": "Tokalator",
        "icon": "$(sparkle)"
      },
      {
        "command": "tokalator.clearPins",
        "title": "Clear All Pinned Files",
        "category": "Tokalator"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "tokalator.refresh",
          "when": "view == tokalator.dashboard",
          "group": "navigation"
        },
        {
          "command": "tokalator.optimize",
          "when": "view == tokalator.dashboard",
          "group": "navigation"
        }
      ]
    },
    "configuration": {
      "title": "Tokalator",
      "properties": {
        "tokalator.relevanceThreshold": {
          "type": "number",
          "default": 0.3,
          "minimum": 0,
          "maximum": 1,
          "description": "Tabs below this relevance score are marked as distractors (0-1)"
        },
        "tokalator.windowSize": {
          "type": "number",
          "default": 1000000,
          "description": "Override context window size in tokens. Leave at default to use the selected model's window."
        },
        "tokalator.model": {
          "type": "string",
          "default": "claude-opus-4.6",
          "enum": [
            "claude-opus-4.6",
            "claude-sonnet-4.5",
            "claude-sonnet-4",
            "claude-haiku-4.5",
            "gpt-5.2",
            "gpt-5.2-codex",
            "gpt-5.1",
            "gpt-5-mini",
            "gpt-4.1",
            "o3",
            "o4-mini",
            "gemini-3-pro",
            "gemini-3-flash",
            "gemini-2.5-pro"
          ],
          "enumDescriptions": [
            "Claude Opus 4.6 — 1M tokens",
            "Claude Sonnet 4.5 — 200K tokens",
            "Claude Sonnet 4 — 200K tokens",
            "Claude Haiku 4.5 — 200K tokens",
            "GPT-5.2 — 256K tokens",
            "GPT-5.2 Codex — 256K tokens",
            "GPT-5.1 — 256K tokens",
            "GPT-5 Mini — 256K tokens",
            "GPT-4.1 — 1M tokens",
            "o3 — 200K tokens",
            "o4-mini — 200K tokens",
            "Gemini 3 Pro — 1M tokens",
            "Gemini 3 Flash — 1M tokens",
            "Gemini 2.5 Pro — 1M tokens"
          ],
          "description": "AI model to calculate context budget against"
        },
        "tokalator.contextRotWarningTurns": {
          "type": "number",
          "default": 20,
          "description": "Warn about context rot after this many chat turns (Opus 4.6 scores 76% on 1M MRCR v2 vs 18.5% for Sonnet 4.5)"
        },
        "tokalator.autoRefreshInterval": {
          "type": "number",
          "default": 2000,
          "description": "Dashboard refresh interval in milliseconds"
        },
        "tokalator.secretGuard": {
          "type": "boolean",
          "default": true,
          "description": "Enable secret detection guardrail — scans open files for API keys, passwords, and credentials that could leak into AI context"
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "esbuild ./src/extension.ts --bundle --outfile=dist/extension.js --external:vscode --format=cjs --platform=node --sourcemap --minify",
    "watch": "esbuild ./src/extension.ts --bundle --outfile=dist/extension.js --external:vscode --format=cjs --platform=node --sourcemap --watch",
    "lint": "eslint src --ext ts",
    "test": "jest --verbose"
  },
  "devDependencies": {
    "@types/jest": "^30.0.0",
    "@types/node": "^20.11.0",
    "@types/vscode": "^1.99.0",
    "esbuild": "^0.24.0",
    "jest": "^30.2.0",
    "ts-jest": "^29.4.6",
    "typescript": "^5.5.0"
  },
  "dependencies": {
    "@anthropic-ai/tokenizer": "^0.0.4",
    "js-tiktoken": "^1.0.21"
  }
}
